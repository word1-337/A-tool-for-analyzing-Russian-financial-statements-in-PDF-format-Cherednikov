# Агент анализа финансовой устойчивости

Инструмент для анализа российской бухгалтерской отчётности (баланс, ОФР, ОДДС) в формате PDF:

- извлекает таблицы с помощью MinerU;
- считает ключевые коэффициенты финансовой устойчивости;
- оценивает динамику (темпы прироста по строкам отчётности);
- рассчитывает интегральный индекс финансовой устойчивости (0..1);
- предоставляет веб-интерфейс на Streamlit;
- опционально даёт текстовый вывод ИИ через Ollama (модель qwen2.5:32b).

## Структура проекта

```
agent.py          — единый файл: backend + веб-интерфейс
requirements.txt  — зависимости
results/          — готовые .txt-отчёты (создаётся автоматически)
```

## Требования

- Python 3.10 или 3.11 (MinerU несовместим с 3.12+)
- pip

## Установка

```bash
pip install -r requirements.txt
```

> При первом анализе PDF MinerU автоматически скачивает модели (~5 ГБ).
> Нужен интернет и свободное место на диске.

## Запуск

```bash
streamlit run agent.py
```

Браузер откроется на `http://localhost:8501`.

## Настройка Ollama (опционально)

Для работы ИИ-комментариев:

1. Установи Ollama: https://ollama.com/download
2. Скачай модель:

   ```bash
   ollama pull qwen2.5:32b
   ```

> Модель `qwen2.5:32b` весит ~20 ГБ и требует 32+ ГБ ОЗУ.
> Если ресурсов мало — используй `qwen2.5:7b` (заменить в `agent.py` строку `model="qwen2.5:32b"`).

## Частые проблемы

| Проблема | Решение |
|---|---|
| MinerU скачивает модели очень долго | Нормально при первом запуске (~5 ГБ), дождись |
| Ollama не отвечает | Убедись что Ollama установлена и запущена (`ollama serve`) |
| Python 3.12 / 3.13 — ошибки при установке MinerU | Используй строго Python 3.10 или 3.11 |
| `streamlit` не найден | Выполни `pip install -r requirements.txt` |
